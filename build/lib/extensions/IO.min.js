"use strict";function _interopRequireDefault(a){return a&&a.__esModule?a:{"default":a}}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function serialize(a,b){if(b.addNode(a),"object"==("undefined"==typeof a?"undefined":_typeof(a)))for(var c in a)try{var d=a[c];b.hasNode(d)||serialize(d,b),b.addEdge(a,d)}catch(e){}}var _slicedToArray=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(i){e=!0,f=i}finally{try{!d&&h["return"]&&h["return"]()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a},_createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();Object.defineProperty(exports,"__esModule",{value:!0});var _mixin=require("../../node_modules/various/build/LayerJS/mixin"),_mixin2=_interopRequireDefault(_mixin),_graph=require("../graph"),_circularJson=require("../../node_modules/circular-json/build/circular-json"),_circularJson2=_interopRequireDefault(_circularJson),IO=function(){function a(){_classCallCheck(this,a)}return _createClass(a,null,[{key:"importObject",value:function(a){if("object"!=("undefined"==typeof a?"undefined":_typeof(a)))throw Error("Argument is not an object!");var b=new _graph.Graph(!0);return serialize(a,b),b}},{key:"exportGraph",value:function(a){var b={nodes:Array.from(a.nodes),edges:Array.from(a.edges)};return b}},{key:"migrateGraph",value:function(a){var b=arguments.length<=1||void 0===arguments[1]?new _graph.Graph:arguments[1],c=!0,d=!1,e=void 0;try{for(var f,g=a.nodes[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var h=_slicedToArray(f.value,2),i=h[0],j=h[1];b.addNode(i),(0,_mixin2["default"])(b.nodes.get(i),j,_mixin2["default"].SAFE_OVERRIDE)}}catch(k){d=!0,e=k}finally{try{!c&&g["return"]&&g["return"]()}finally{if(d)throw e}}var l=!0,m=!1,n=void 0;try{for(var o,p=a.edges[Symbol.iterator]();!(l=(o=p.next()).done);l=!0){var q=o.value;b.addEdge(q.source,q.target,q.weight)}}catch(k){m=!0,n=k}finally{try{!l&&p["return"]&&p["return"]()}finally{if(m)throw n}}return b}},{key:"serialize",value:function(b){return _circularJson2["default"].stringify(a.exportGraph(b))}},{key:"deserialize",value:function(b){return a.migrateGraph(_circularJson2["default"].parse(b))}}]),a}();exports["default"]=IO;