define(["exports"],function(a){"use strict";var b=function(a,b){if(Array.isArray(a))return a;if(Symbol.iterator in Object(a)){for(var c,d=[],e=a[Symbol.iterator]();!(c=e.next()).done&&(d.push(c.value),!b||d.length!==b););return d}throw new TypeError("Invalid attempt to destructure non-iterable instance")},c=function(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)},d=function k(a,b,c){var d=Object.getOwnPropertyDescriptor(a,b);if(void 0===d){var e=Object.getPrototypeOf(a);return null===e?void 0:k(e,b,c)}if("value"in d&&d.writable)return d.value;var f=d.get;return void 0===f?void 0:f.call(c)},e=function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(a.__proto__=b)},f=function(){function a(a,b){for(var c in b){var d=b[c];d.configurable=!0,d.value&&(d.writable=!0)}Object.defineProperties(a,b)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")};Object.defineProperty(a,"__esModule",{value:!0});{var h=Symbol(),i=a.Graph=function(){function a(){var b=void 0===arguments[0]?!1:arguments[0];g(this,a),Object.defineProperty(this,"nodes",{value:new Map}),this.directed=!!b}return f(a,{directed:{get:function(){return this[h]},set:function(a){if(this[h]=!!a,this.directed){var b=!0,d=!1,e=void 0;try{for(var f,g=this.edges[Symbol.iterator]();!(b=(f=g.next()).done);b=!0){var i=f.value;this.addEdge.apply(this,c(i))}}catch(j){d=!0,e=j}finally{try{!b&&g["return"]&&g["return"]()}finally{if(d)throw e}}}}},edges:{get:function(){var a=this;return function(){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a.nodes[Symbol.iterator]();!(d=(g=h.next()).done);d=!0){var i=b(g.value,2),j=i[0],k=i[1],l=!0,m=!1,n=void 0;try{for(var o,p=k.dependents[Symbol.iterator]();!(l=(o=p.next()).done);l=!0){var q=b(o.value,2),r=q[0],s=q[1];c.push({source:j,target:r,weight:s})}}catch(t){m=!0,n=t}finally{try{!l&&p["return"]&&p["return"]()}finally{if(m)throw n}}}}catch(t){e=!0,f=t}finally{try{!d&&h["return"]&&h["return"]()}finally{if(e)throw f}}return c}()}},addNode:{value:function(a){if(this.hasNode(a))return!1;var b={};return Object,defineProperties(b,{dependents:{value:new Map},dependencies:{value:new Map}}),this.nodes.set(a,b),!0}},hasNode:{value:function(a){return this.nodes.has(a)}},removeNode:{value:function(a){if(!this.hasNode(a))return!1;var c=this.nodes.get(a);this.nodes["delete"](a);var d=!0,e=!1,f=void 0;try{for(var g,h=c.dependencies[Symbol.iterator]();!(d=(g=h.next()).done);d=!0){var i=b(g.value,2),j=i[1];j["delete"](a)}}catch(k){e=!0,f=k}finally{try{!d&&h["return"]&&h["return"]()}finally{if(e)throw f}}var l=!0,m=!1,n=void 0;try{for(var o,p=c.dependents[Symbol.iterator]();!(l=(o=p.next()).done);l=!0){var q=b(o.value,2),r=q[1];r["delete"](a)}}catch(k){m=!0,n=k}finally{try{!l&&p["return"]&&p["return"]()}finally{if(m)throw n}}return!0}},addEdge:{value:function(a,b){var c=void 0===arguments[2]?1:arguments[2],d=this.nodes;return d.has(a)&&d.has(b)?(d.get(a).dependents.set(b,c),d.get(b).dependencies.set(a,c),this.directed||(d.get(b).dependents.set(a,c),d.get(a).dependencies.set(b,c)),!0):!1}},removeEdge:{value:function(a,b){var c=this.nodes;return c.has(a)&&c.has(b)?(c.get(a).dependents["delete"](b),c.get(b).dependencies["delete"](a),this.directed||(c.get(b).dependents["delete"](a),c.get(a).dependencies["delete"](b)),!0):!1}},hasEdge:{value:function(a,b){return this.hasNode(a)&&this.hasNode(b)&&this.nodes.get(a).dependents.has(b)}},clear:{value:function(){return this.nodes.clear()}},hasCycle:{value:function(){for(var a=arguments.length,b=Array(a),c=0;a>c;c++)b[c]=arguments[c];return!!this.getCycle.apply(this,b)}},getCycle:{value:function(){function a(f,g,h){if(!d.has(f)){if(e.has(f))return h;e.add(f);var i=this.nodes,j=!0,k=!1,l=void 0;try{for(var m,n=f.dependents[Symbol.iterator]();!(j=(m=n.next()).done);j=!0){var o=b(m.value,1),p=o[0],q=i.get(p);if(c||q!==g){var r=a.call(this,q,f,h+1);if(r)return r}}}catch(s){k=!0,l=s}finally{try{!j&&n["return"]&&n["return"]()}finally{if(k)throw l}}d.add(f)}}var c=this.directed,d=new Set,e=new Set,f=!0,g=!1,h=void 0;try{for(var i,j=this.nodes[Symbol.iterator]();!(f=(i=j.next()).done);f=!0){var k=b(i.value,2),l=k[1],m=a.call(this,l,void 0,0);if(m)return m}}catch(n){g=!0,h=n}finally{try{!f&&j["return"]&&j["return"]()}finally{if(g)throw h}}return 0}},getDegree:{value:function(a){var c=this,d=this.nodes.get(a);return d?{node:a,"in":d.dependencies.size,out:d.dependents.size}:function(){var a=[],d=!0,e=!1,f=void 0;try{for(var g,h=c.nodes[Symbol.iterator]();!(d=(g=h.next()).done);d=!0){var i=b(g.value,2),j=i[0],k=i[1];a.push({node:j,"in":k.dependencies.size,out:k.dependents.size})}}catch(l){e=!0,f=l}finally{try{!d&&h["return"]&&h["return"]()}finally{if(e)throw f}}return a}()}}}),a}(),j=a.AcyclicGraph=function(a){function b(){g(this,b),null!=a&&a.apply(this,arguments)}return e(b,a),f(b,{addEdge:{value:function(a,c,e){var f=d(Object.getPrototypeOf(b.prototype),"addEdge",this).call(this,a,c,e);if(f&&this.hasCycle(!0)){if(this.removeEdge(a,c))return!1;throw Error("Cyclic node could not be removed")}return f}},getCycle:{value:function(){var a=void 0===arguments[0]?!1:arguments[0];return a?d(Object.getPrototypeOf(b.prototype),"getCycle",this).call(this):0}},hasCycle:{value:function(){var a=void 0===arguments[0]?!1:arguments[0];return!!d(Object.getPrototypeOf(b.prototype),"hasCycle",this).call(this,a)}}}),b}(i);a.Tree=function(a){function b(){g(this,b),null!=a&&a.apply(this,arguments)}return e(b,a),f(b,{addEdge:{value:function(a,c,e){return this.nodes.get(c).dependencies.size>0?!1:d(Object.getPrototypeOf(b.prototype),"addEdge",this).call(this,a,c,e)}}}),b}(j)}});