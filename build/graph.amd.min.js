define(["exports"],function(a){"use strict";var b=function(a,b){if(Array.isArray(a))return a;if(Symbol.iterator in Object(a)){for(var c,d=[],e=a[Symbol.iterator]();!(c=e.next()).done&&(d.push(c.value),!b||d.length!==b););return d}throw new TypeError("Invalid attempt to destructure non-iterable instance")},c=function(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)},d=function n(a,b,c){var d=Object.getOwnPropertyDescriptor(a,b);if(void 0===d){var e=Object.getPrototypeOf(a);return null===e?void 0:n(e,b,c)}if("value"in d&&d.writable)return d.value;var f=d.get;return void 0===f?void 0:f.call(c)},e=function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(a.__proto__=b)},f=function(){function a(a,b){for(var c in b){var d=b[c];d.configurable=!0,d.value&&(d.writable=!0)}Object.defineProperties(a,b)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")};Object.defineProperty(a,"__esModule",{value:!0});{var h=Symbol(),i=Symbol(),j=Symbol(),k=Symbol(),l=a.Graph=function(){function a(){var b=void 0===arguments[0]?!1:arguments[0];g(this,a),this[h]=new Map,this.directed=!!b}return f(a,{directed:{get:function(){return this[k]},set:function(a){if(this[k]=!!a,this.directed){var b=!0,d=!1,e=void 0;try{for(var f,g=this.edges[Symbol.iterator]();!(b=(f=g.next()).done);b=!0){var h=f.value;this.addEdge.apply(this,c(h))}}catch(i){d=!0,e=i}finally{try{!b&&g["return"]&&g["return"]()}finally{if(d)throw e}}}}},nodes:{get:function(){return new Map(this[h])}},edges:{get:function(){var a=this;return function(){var c=[],d=!0,e=!1,f=void 0;try{for(var g,i=a[h][Symbol.iterator]();!(d=(g=i.next()).done);d=!0){var j=b(g.value,2),k=j[0],l=j[1],m=!0,n=!1,o=void 0;try{for(var p,q=l.dependents[Symbol.iterator]();!(m=(p=q.next()).done);m=!0){var r=b(p.value,2),s=r[0],t=r[1];c.push({source:k,target:s,weight:t})}}catch(u){n=!0,o=u}finally{try{!m&&q["return"]&&q["return"]()}finally{if(n)throw o}}}}catch(u){e=!0,f=u}finally{try{!d&&i["return"]&&i["return"]()}finally{if(e)throw f}}return c}()}},addNode:{value:function(a){if(this.hasNode(a))return!1;var b=Object.defineProperties({},{dependencies:{get:function(){return new Map(this[i])},configurable:!0,enumerable:!0},dependents:{get:function(){return new Map(this[j])},configurable:!0,enumerable:!0}});return b[i]=new Map,b[j]=new Map,this[h].set(a,b),!0}},hasNode:{value:function(a){return this[h].has(a)}},removeNode:{value:function(a){if(!this.hasNode(a))return!1;var c=this[h].get(a);this[h]["delete"](a);var d=!0,e=!1,f=void 0;try{for(var g,k=c[i][Symbol.iterator]();!(d=(g=k.next()).done);d=!0){var l=b(g.value,2),m=l[1];m["delete"](a)}}catch(n){e=!0,f=n}finally{try{!d&&k["return"]&&k["return"]()}finally{if(e)throw f}}var o=!0,p=!1,q=void 0;try{for(var r,s=c[j][Symbol.iterator]();!(o=(r=s.next()).done);o=!0){var t=b(r.value,2),u=t[1];u["delete"](a)}}catch(n){p=!0,q=n}finally{try{!o&&s["return"]&&s["return"]()}finally{if(p)throw q}}return!0}},addEdge:{value:function(a,b){var c=void 0===arguments[2]?1:arguments[2],d=this[h];return d.has(a)&&d.has(b)?(d.get(a)[j].set(b,c),d.get(b)[i].set(a,c),this.directed||(d.get(b)[j].set(a,c),d.get(a)[i].set(b,c)),!0):!1}},removeEdge:{value:function(a,b){var c=this[h];return c.has(a)&&c.has(b)?(c.get(a)[j]["delete"](b),c.get(b)[i]["delete"](a),this.directed||(c.get(b)[j]["delete"](a),c.get(a)[i]["delete"](b)),!0):!1}},hasEdge:{value:function(a,b){return this.hasNode(a)&&this.hasNode(b)&&this[h].get(a)[j].has(b)}},clear:{value:function(){return this[h].clear()}},hasCycle:{value:function(){return!!this.getCycle()}},getCycle:{value:function(){function a(f,g,i){if(!d.has(f)){if(e.has(f))return i;e.add(f);var k=this[h],l=!0,m=!1,n=void 0;try{for(var o,p=f[j][Symbol.iterator]();!(l=(o=p.next()).done);l=!0){var q=b(o.value,1),r=q[0],s=k.get(r);if(c||s!==g){var t=a.call(this,s,f,i+1);if(t)return t}}}catch(u){m=!0,n=u}finally{try{!l&&p["return"]&&p["return"]()}finally{if(m)throw n}}d.add(f)}}var c=this.directed,d=new Set,e=new Set,f=!0,g=!1,i=void 0;try{for(var k,l=this[h][Symbol.iterator]();!(f=(k=l.next()).done);f=!0){var m=b(k.value,2),n=m[1],o=a.call(this,n,void 0,0);if(o)return o}}catch(p){g=!0,i=p}finally{try{!f&&l["return"]&&l["return"]()}finally{if(g)throw i}}return 0}},getDegree:{value:function(a){var c=this,d=this[h].get(a);return d?{node:a,"in":d.dependencies.size,out:d.dependents.size}:function(){var a=[],d=!0,e=!1,f=void 0;try{for(var g,i=c[h][Symbol.iterator]();!(d=(g=i.next()).done);d=!0){var j=b(g.value,2),k=j[0],l=j[1];a.push({node:k,"in":l.dependencies.size,out:l.dependents.size})}}catch(m){e=!0,f=m}finally{try{!d&&i["return"]&&i["return"]()}finally{if(e)throw f}}return a}()}}}),a}(),m=a.AcyclicGraph=function(a){function b(){g(this,b),null!=a&&a.apply(this,arguments)}return e(b,a),f(b,{addEdge:{value:function(a,c,e){var f=d(Object.getPrototypeOf(b.prototype),"addEdge",this).call(this,a,c,e);if(f&&this.hasCycle(!0)){if(this.removeEdge(a,c))return!1;throw Error("Cyclic node could not be removed")}return f}},getCycle:{value:function(){var a=void 0===arguments[0]?!1:arguments[0];return a?d(Object.getPrototypeOf(b.prototype),"getCycle",this).call(this):0}},hasCycle:{value:function(){var a=void 0===arguments[0]?!1:arguments[0];return!!this.getCycle(a)}}}),b}(l);a.Tree=function(a){function b(){g(this,b),null!=a&&a.apply(this,arguments)}return e(b,a),f(b,{addEdge:{value:function(a,c,e){return this[h].get(c)[i].size>0?!1:d(Object.getPrototypeOf(b.prototype),"addEdge",this).call(this,a,c,e)}}}),b}(m)}});