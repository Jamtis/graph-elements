define(["exports","module","../../graph","../../../node_modules/d3/d3","../../external/mixin","../../external/layer"],function(a,b,c,d,e,f){"use strict";function g(a){a[s]={},a[t]=m.select(a.svg);var b=m.layout.force();a[p]=b,b.on("tick",h.bind(a)),a.resize(),addEventListener("polymer-ready",a.resize)}function h(){var a=this[q].arrow,b=a.width,c=a.ratio,d=this[s],e=d.circles,f=d.paths;e&&e.attr("transform",function(a){return"translate("+a.x+","+a.y+")"}),f&&f.attr("d",function(a){var d=a.source,e=a.target,f=d.x-e.x,g=d.y-e.y,h=Math.hypot(f,g),i=f/h*b,j=g/h*b;isNaN(i)&&(i=0),isNaN(j)&&(j=0);var k=d.x-i*c,l=d.y-j*c;return"M"+e.x+","+e.y+"L "+k+","+l+"L "+(d.x+j)+","+(d.y-i)+"L "+(d.x-j)+","+(d.y+i)+"L "+k+","+l})}function i(a){var b={circle:{radius:6},arrow:{width:6,ratio:2},force:{charge:-200,linkDistance:36,linkStrength:1,gravity:.15},size:{ratio:1}};a[q]=b,a[r]=o(b,{circle:{radius:function(a){var b=function(){return a.apply(this,arguments)};return b.toString=function(){return a.toString()},b}(function(b,c){b=parseFloat(b),1/0>b&&b>-(1/0)&&(c(b),a[p].tick())})},arrow:{width:function(a){var b=function(){return a.apply(this,arguments)};return b.toString=function(){return a.toString()},b}(function(b,c){b=parseFloat(b),charge<1/0&&b>-(1/0)&&(c(b),a[p].tick())}),ratio:function(a){var b=function(){return a.apply(this,arguments)};return b.toString=function(){return a.toString()},b}(function(b,c){b=Math.abs(parseFloat(b)),1/0>b&&(c(b),a[p].tick())})},force:{charge:function(a){var b=function(){return a.apply(this,arguments)};return b.toString=function(){return a.toString()},b}(function(b,c){b=parseFloat(b),1/0>b&&b>-(1/0)&&(c(b),a[p].charge(b).stop().start())}),linkDistance:function(a){var b=function(){return a.apply(this,arguments)};return b.toString=function(){return a.toString()},b}(function(b,c){b=Math.abs(parseFloat(b)),1/0>b&&(c(b),a[p].linkDistance(b).stop().start())}),linkStrength:function(a){var b=function(){return a.apply(this,arguments)};return b.toString=function(){return a.toString()},b}(function(b,c){b=Math.abs(parseFloat(b)),1/0>b&&(c(b),a[p].linkStrength(b).stop().start())}),gravity:function(a){var b=function(){return a.apply(this,arguments)};return b.toString=function(){return a.toString()},b}(function(b,c){b=Math.abs(parseFloat(b)),1/0>b&&(c(b),a[p].gravity(b).stop().start())})},size:{ratio:function(a){var b=function(){return a.apply(this,arguments)};return b.toString=function(){return a.toString()},b}(function(b,c){b=Math.abs(parseFloat(b)),1/0>b&&(c(b),a.resize())})}})}var j=function(a){return a&&a.__esModule?a["default"]:a},k=function(a,b){if(Array.isArray(a))return a;if(Symbol.iterator in Object(a)){for(var c,d=[],e=a[Symbol.iterator]();!(c=e.next()).done&&(d.push(c.value),!b||d.length!==b););return d}throw new TypeError("Invalid attempt to destructure non-iterable instance")},l=c.Graph,m=j(d),n=j(e),o=j(f),p=Symbol(),q=Symbol(),r=Symbol(),s=Symbol(),t=Symbol();b.exports=Object.defineProperties({is:"graphjs-tezcatlipoca",ready:function(){g(this),this.options=this[q]},created:function(){var a=this;i(a),this.real_options=this[q],a.resize=function(){requestAnimationFrame(function(){var b=a.svg,c=getComputedStyle(b),d=c.width,e=c.height,f=a[q].size.ratio;d=parseFloat(d)/f,e=parseFloat(e)/f,b.viewBox.baseVal.width=d,b.viewBox.baseVal.height=e;var g=a[p];g.size([d,e]),g.alpha(.1)})}},attached:function(){addEventListener("resize",this.resize)},detached:function(){removeEventListener("resize",this.resize)},observe:{graph:"updateGraph"},updateGraph:function(){var a=this;this.graph?!function(){var b=new Map(function(){var b=[],c=!0,d=!1,e=void 0;try{for(var f,g=a.graph.nodes[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var h=k(f.value,1),i=h[0];b.push([i,{value:i}])}}catch(j){d=!0,e=j}finally{try{!c&&g["return"]&&g["return"]()}finally{if(d)throw e}}return b}()),c=function(){var a=[],c=!0,d=!1,e=void 0;try{for(var f,g=b[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var h=k(f.value,2),i=h[1];a.push(i)}}catch(j){d=!0,e=j}finally{try{!c&&g["return"]&&g["return"]()}finally{if(d)throw e}}return a}(),d=function(){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a.graph.edges[Symbol.iterator]();!(d=(g=h.next()).done);d=!0){var i=g.value,j=i.source,k=i.target;c.push({source:b.get(j),target:b.get(k)})}}catch(l){e=!0,f=l}finally{try{!d&&h["return"]&&h["return"]()}finally{if(e)throw f}}return c}(),e=a[p];e.nodes(c).links(d);var f=a[t],g=f.selectAll("circle.node").data(c),h=f.selectAll("path.edge").data(d);a[s]={circles:g,paths:h},h.enter().append("path").attr("class","edge"),g.enter().append("circle").attr("r",a[q].circle.radius).attr("class","node").call(e.drag),h.exit().remove(),g.exit().remove(),f.selectAll("circle.node,path.edge").sort(function(a){return("value"in a)-.5}),e.start()}():this.graph=new l}},{svg:{get:function(){return this.$.svg},configurable:!0,enumerable:!0},force:{get:function(){return this[p]},configurable:!0,enumerable:!0},options:{get:function(){return this[r]},set:function(a){n(this[r],a,!1,!0)},configurable:!0,enumerable:!0}})});